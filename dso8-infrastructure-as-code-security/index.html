<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praktik Minggu 8 DevSecOps</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <button class="back-button" onclick="window.history.back();">&#8592; Back</button>
            <h1>88032023006  |  ZICO</h1>
            <p>...</p>
        </div>
    </header>

    <title1>
        <div class="title1-container">
            <h1>Praktik Minggu 8 DevSecOps</h1>
            <h2>Infrastructure as Code (IaC) Security</h2>
        </div>
    </title1>

    <main>
        <section class="content">

            <!-- ======================================================== -->

            <article>
              <p>Pada praktik DevSecOps minggu ke-8 ini, kita berfokus pada keamanan Infrastructure as Code (IaC) dengan menggunakan dua tool utama:</p>
              <ul>
                <li>Trivy → untuk memeriksa misconfiguration pada file Terraform</li>
                <li>ansible-lint → untuk memeriksa kualitas dan keamanan playbook Ansible</li>
              </ul>
              <p>Karena Ansible dan sebagian besar tool IaC dibuat untuk berjalan di lingkungan Linux/POSIX, sedangkan Anda bekerja menggunakan Windows 11 tanpa WSL atau Virtual Machine, maka seluruh proses scanning akan dilakukan melalui:</p>
              <ul>
                <li>Docker container (untuk menjalankan Trivy & ansible-lint)</li>
                <li>GitHub Actions (opsional sebagai alternatif lingkungan eksekusi CI/CD)</li>
              </ul>
              <p>Dengan pendekatan ini, Anda tetap bisa melakukan seluruh langkah DevSecOps secara penuh tanpa berpindah OS.</p>
              <ol>Dokumentasi berikut memuat:
                <li>Instalasi paket dan persiapan direktori</li>
                <li>Pembuatan konfigurasi IaC (Terraform & Ansible)</li>
                <li>Penyisipan minimal 3 misconfiguration</li>
                <li>Scanning otomatis menggunakan Trivy dan ansible-lint</li>
                <li>Perbaikan semua temuan (findings)</li>
                <li>Pembuatan laporan akhir</li>
              </ol>
              <p>Seluruh langkah ditulis rinci dan dilengkapi script, command, serta penjelasan perbaikan agar mudah direplikasi pada mesin Windows.</p>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>1.1 Flow Praktik 1 : Tahap Persiapan</h2>
                <p>Buat direktori baru untuk IaC Terraform:</p>
                <textarea id="markdown-input" rows="0" cols="0">
mkdir iac-terraform-sec
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
cd iac-terraform-sec
                </textarea>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>1.2 Flow Praktik 1 : Buat File Terraform Insecure</h2>
                <p>File main.tf dibuat secara sengaja insecure untuk memunculkan temuan ketika discan menggunakan Trivy.</p>
                <p><strong>main.tf (versi insecure)</strong></p>
                <textarea id="markdown-input2" rows="0" cols="0">
resource "aws_s3_bucket" "example" {
    bucket = "my-insecure-bucket"
    acl = "public-read" # insecure
    versioning {
        enabled = false # insecure
    }
}
                </textarea>
                <img src="assets/dso-1.png" alt="Image1" class="article-image">
                <p><strong>Misconfiguration yang dimasukkan:</strong></p>
                <ul>
                  <li>acl = "public-read" → bucket dapat dibaca publik</li>
                  <li>versioning.enabled = false → tidak ada proteksi versi</li>
                </ul>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>1.3 Flow Praktik 1 : Scan dengan Trivy (Tidak Aman)</h2>
                <p>Trivy dijalankan melalui Docker</p>
                <textarea id="markdown-input3" rows="0" cols="0">
docker run --rm -v "C:\Users\laptop\OneDrive\Documents\GitHub\devsecops-week8\iac-terraform-sec:/scan" aquasec/trivy:latest config /scan/main.tf --format table --output /scan/trivy-iac-output.txt --timeout 30m
                </textarea>
                <img src="assets/dso-2.png" alt="Image1" class="article-image">
                <p>Output akan tersimpan pada:</p>
                <textarea id="markdown-input" rows="0" cols="0">
trivy-iac-output-insecure.txt
                </textarea>
                <p>Buka file trivy-iac-output-insecure.txt:</p>
                <img src="assets/dso-3.png" alt="Image1" class="article-image">
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>1.4 Flow Praktik 1 : Fix Misconfiguration</h2>
                <p>Ubah file Terraform menjadi aman:</p>
                <p><strong>main.tf (versi secure)</strong></p>
                <textarea id="markdown-input2" rows="0" cols="0">
resource "aws_s3_bucket" "example" {
    bucket = "my-insecure-bucket"
    acl = "private"
    versioning {
        enabled = true
    }
}
                </textarea>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>1.5 Flow Praktik 1 : Scan Ulang dengan Trivy (Aman)</h2>
                <p>Trivy dijalankan melalui Docker</p>
                <textarea id="markdown-input3" rows="0" cols="0">
docker run --rm -v "C:\Users\laptop\OneDrive\Documents\GitHub\devsecops-week8\iac-terraform-sec:/scan" aquasec/trivy:latest config /scan/main.tf --format table --output /scan/trivy-iac-output-secure.txt --timeout 30m
                </textarea>
                <img src="assets/dso-4.png" alt="Image1" class="article-image">
                <p>Output akan tersimpan pada:</p>
                <textarea id="markdown-input" rows="0" cols="0">
trivy-iac-output-secure.txt
                </textarea>
                <p>Buka file trivy-iac-output-secure.txt:</p>
                <img src="assets/dso-5.png" alt="Image1" class="article-image">
                <p>Hasil menunjukkan bahwa misconfiguration telah hilang.</p>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>2.1 Flow Praktik 2 : Tahap Persiapan</h2>
                <p>Persiapan Direktori</p>
                <textarea id="markdown-input" rows="0" cols="0">
mkdir ansible-sec
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
cd ansible-sec
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
mkdir roles
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
mkdir tasks
                </textarea>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>2.2 Flow Praktik 2 : Buat File Playbook Insecure</h2>
                <p>Playbook awal dibuat dengan beberapa kesalahan konfigurasi agar ansible-lint menghasilkan temuan.</p>
                <p><strong>playbook.yml (versi insecure)</strong></p>
                <textarea id="markdown-input4" rows="0" cols="0">
- hosts: all
  become: yes
  tasks:
    - name: Install Apache
      apt:
        name: apache2
        state: present

    - name: Copy Insecure Config
      copy:
        src: config.conf
        dest: /etc/apache2/config.conf
        mode: 0777   # insecure

                </textarea>
                <img src="assets/dso-6.png" alt="Image1" class="article-image">
                <p><strong>Misconfiguration yang ditambahkan (3 buah):</strong></p>
                <ul>
                  <li>File permission insecure → 0777</li>
                  <li>No handlers → perubahan konfigurasi tidak memicu restart</li>
                  <li>Truthy YAML salah (yes)</li>
                  <li>Modul tidak FQCN (apt/copy) (bonus)</li>
                </ul>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>2.3 Flow Praktik 2 : Jalankan Scanning ansible-lint</h2>
                <p><strong>Scan menggunakan ansible-lint</strong></p>
                <textarea id="markdown-input" rows="0" cols="0">
docker run --rm -v "${PWD}:/data" -w /data cytopia/ansible-lint ansible-lint playbook.yml
                </textarea>
                <p><strong>Hasil</strong></p>
                <img src="assets/dso-7.png" alt="Image1" class="article-image">
                <p><strong>Temuan (findings) yang muncul:</strong></p>
                <ul>
                  <li><strong>name[play]:</strong> All plays should be named. (warning) playbook.yml:1</li>
                  <li><strong>yaml[truthy]:</strong> Truthy value should be one of [false, true] playbook.yml:2</li>
                  <li><strong>fqcn[action-core]:</strong> Use FQCN for builtin module actions (apt). playbook.yml:4 Use `ansible.builtin.apt` or `ansible.legacy.apt` instead.</li>
                  <li><strong>fqcn[action-core]:</strong> Use FQCN for builtin module actions (copy). playbook.yml:9 Use `ansible.builtin.copy` or `ansible.legacy.copy` instead.</li>
                </ul>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>2.4 Flow Praktik 2 : Perbaikan Playbook dan Jalankan Scanning Ulang</h2>

                <p><strong>Berikut yang perlu diperbaiki:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Komponen</th>
                      <th>Sebelumnya</th>
                      <th>Setelah Perbaikan</th>
                      <th>Alasan</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Nama Play</td>
                      <td>Tidak ada</td>
                      <td><code>- name: Playbook</code></td>
                      <td>Memenuhi rule lint</td>
                    </tr>

                    <tr>
                      <td>Boolean</td>
                      <td><code>yes</code></td>
                      <td><code>true</code></td>
                      <td>Format YAML standar</td>
                    </tr>

                    <tr>
                      <td>Modul</td>
                      <td><code>apt, copy</code></td>
                      <td><code>ansible.builtin.apt, ansible.builtin.copy</code></td>
                      <td>FQCN wajib</td>
                    </tr>

                    <tr>
                      <td>Mode file</td>
                      <td><code>0777</code></td>
                      <td><code>0644</code></td>
                      <td>Security best practice</td>
                    </tr>

                    <tr>
                      <td>Struktur task</td>
                      <td>Kurang rapih</td>
                      <td>Konsisten &amp; lint-friendly</td>
                      <td>Readability &amp; maintainability</td>
                    </tr>
                  </tbody>
                </table>

                <p><strong>playbook.yml (versi secure)</strong></p>
                <textarea id="markdown-input4" rows="0" cols="0">
- name: Playbook
  hosts: all
  become: true
  tasks:
    - name: Install Apache
      ansible.builtin.apt:
        name: apache2
        state: present

    - name: Copy Insecure Config
      ansible.builtin.copy:
        src: config.conf
        dest: /etc/apache2/config.conf
        mode: 0644

                </textarea>
                <p><strong>Scan Ulang menggunakan ansible-lint</strong></p>
                <textarea id="markdown-input" rows="0" cols="0">
docker run --rm -v "${PWD}:/data" -w /data cytopia/ansible-lint ansible-lint playbook.yml
                </textarea>
                <p><strong>Hasil</strong></p>
                <img src="assets/dso-8.png" alt="Image1" class="article-image">
                <p>Tidak ada lagi temuan (0 failures, 0 warnings).</p>
                <p>Playbook dinyatakan aman dan sesuai standar Ansible modern.</p>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>3. Integrasi IaC Security dengan GitHub Actions</h2>

                <p><strong>Membuat Repository GitHub (Langkah Awal)</strong></p>
                <p>Buat repository baru</p>
                <ol>
                    <li>Masuk ke GitHub: <a href="https://github.com">https://github.com</a></li>
                    <li>Klik tombol New repository</li>
                    <li>Isi:<ul>
                        <li>Repository name: <strong>devsecops-week8</strong></li>
                        <li>Description: <strong>Repository untuk tugas DevSecOps — Infrastructure as Code (IaC) Security</strong></li>
                        <li>Visibility: <strong>Public</strong></li>
                    </ul></li>
                    <ul>Klik Create repository</ul>
                </ol>
                <p>Repo kamu sekarang siap digunakan.</p>
                
                <p><strong>Push kode aplikasi ke GitHub</strong></p>
                <p>Jalankan di Git Bash / CMD:</p>
                <textarea id="markdown-input2" rows="0" cols="0">
cd C:\Users\laptop\OneDrive\Documents\GitHub\devsecops-week8
git init
git add .
git commit -m "Initial commit - Integrasi ke GitHub"
git branch -M main
git remote add origin https://github.com/kimookoii/devsecops-week8.git
git push -u origin main
                </textarea>
                <p>Setelah push, seluruh kode aplikasi akan muncul di repository GitHub.</p>
                <img src="assets/dso-9.png" alt="Image1" class="article-image">
                
                <p><strong>Tambahkan Workflow GitHub Actions untuk IaC Security</strong></p>
                <p>Untuk melakukan pemeriksaan keamanan otomatis, buat file workflow pada direktori:</p>
                <p>Buat file iac-security.yml</p>
                <textarea id="markdown-input" rows="0" cols="0">
.github/workflows/iac-security.yml
                </textarea>
                <p>Isi:</p>
                <textarea id="markdown-input5" rows="0" cols="0">
name: IaC Security Scan

on:
  push:
  pull_request:

jobs:
  terraform-security:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Install Trivy
        uses: aquasecurity/trivy-action@master
        with:
          scan-type: config
          scan-ref: .

      - name: Terraform Validate
        run: terraform validate || true

  ansible-security:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Install Ansible & ansible-lint
        run: |
          sudo apt update
          sudo apt install -y ansible
          pip install --upgrade pip
          pip install ansible-lint

      - name: Run ansible-lint
        run: ansible-lint .
                </textarea>
                <p>Workflow ini terdiri dari dua job:</p>
                <ul><strong>terraform-security</strong>
                  <li>Memindai file Terraform menggunakan Trivy</li>
                  <li>Melakukan terraform validate</li>
                </ul>
                <ul><strong>ansible-security</strong>
                  <li>Menginstal Ansible & ansible-lint</li>
                  <li>Melakukan scan terhadap playbook Ansible</li>
                </ul>
                <p>Semua pemeriksaan dilakukan otomatis setiap kali ada push atau pull request.</p>

                <p><strong>Menjalankan Pipeline</strong></p>
                <p>Setelah workflow dibuat dan dipush, pipeline otomatis berjalan.</p>
                <p>Masuk ke:<br>
                <strong>GitHub → Actions</strong></p>
                <img src="assets/dso-10.png" alt="Image1" class="article-image">
                <p>Di bagian output akan terlihat:</p>
                <img src="assets/dso-11.png" alt="Image1" class="article-image">
                <p>Jika konfigurasi sudah diperbaiki dan tidak ada misconfiguration, status pipeline akan berwarna hijau (success).</p>

            </article>

            <!-- ======================================================== -->

            <article>
                <h2 id="conclusion">4. Kesimpulan</h2>
                <p>Praktikum Minggu 8 DevSecOps ini berhasil menunjukkan bagaimana penerapan keamanan pada Infrastructure as Code (IaC) dapat dilakukan secara sistematis menggunakan Terraform dan Ansible. Melalui pembuatan konfigurasi yang disengaja insecure, proses scanning menggunakan Trivy dan ansible-lint mampu mengidentifikasi berbagai misconfiguration seperti permission file yang terlalu permisif, modul tanpa FQCN, boolean YAML yang tidak standar, dan konfigurasi layanan cloud yang berpotensi terbuka. Setelah dilakukan perbaikan, proses pemindaian ulang menunjukkan bahwa seluruh temuan telah terselesaikan. Integrasi pipeline otomatis melalui GitHub Actions memastikan bahwa setiap perubahan pada repository akan selalu melewati proses validasi keamanan, sehingga mencegah misconfiguration masuk ke tahap deployment. Dengan demikian, seluruh rangkaian kegiatan ini memberikan pemahaman praktis bahwa keamanan IaC bukan hanya sebatas menulis konfigurasi, tetapi juga memastikan bahwa proses pembangunan, validasi, dan otomatisasi berjalan secara aman, konsisten, dan sesuai standar DevSecOps modern.</p>
            </article>

        </section>
    </main>

    <footer>
        <p>&copy; 2025 | made with love -zico</p>
    </footer>

</body>
</html>