<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praktik Minggu 5 DevSecOps</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <button class="back-button" onclick="window.history.back();">&#8592; Back</button>
            <h1>88032023006  |  ZICO</h1>
            <p>...</p>
        </div>
    </header>

    <title1>
        <div class="title1-container">
            <h1>Praktik Minggu 5 DevSecOps</h1>
            <h2>Menggunakan SAST & DAST dalam Praktik DevSecOps</h2>
        </div>
    </title1>

    <main>
        <section class="content">

            <article>
                <h2>Konsep Dasar SAST & DAST</h2>
                <p>
                    <strong>SAST</strong> (Static Application Security Testing) adalah metode pengujian keamanan yang dilakukan 
                    tanpa menjalankan aplikasi. Pengujian fokus pada kode sumber, bytecode, atau binary untuk mencari kerentanan 
                    seperti SQL Injection, buffer overflow, hardcoded secrets, dan kesalahan logika.
                </p>
                <ul><strong>Karakteristik:</strong>
                    <li>Dilakukan sebelum aplikasi berjalan</li>
                    <li>Bersifat white-box testing</li>
                    <li>Mendeteksi bug lebih awal (shift-left security)</li>
                    <li>Tools umum: SonarQube, Bandit, Checkmarx</li>
                </ul>
                <p>
                    <strong>DAST</strong> (Dynamic Application Security Testing) adalah metode pengujian yang 
                    dilakukan pada aplikasi yang sedang berjalan untuk melihat bagaimana sistem merespons
                    input dan serangan dari luar.
                </p>
                <ul><strong>Karakteristik:</strong>
                    <li>Dilakukan saat aplikasi aktif</li>
                    <li>Bersifat black-box testing</li>
                    <li>Mendeteksi celah runtime seperti XSS, SQL Injection, CSRF</li>
                    <li>Tools umum: OWASP ZAP, Burp Suite, Nikto</li>
                </ul>
            </article>


            <article>
                <h2>Mengapa SAST & DAST Penting</h2>
                <p>Penerapan kedua metode ini mendukung prinsip DevSecOps:</p>
                <ul>
                    <li>Shift-left security — menemukan bug lebih awal.</li>
                    <li>Continuous security — pengujian otomatis setiap commit.</li>
                    <li>Security gate — build pipeline bisa dihentikan saat ada vulnerability kritis.</li>
                    <li>Meningkatkan kualitas kode dan keamanan secara keseluruhan.</li>
                </ul>
            </article>


            <article>
                <h2>Pipeline DevSecOps dengan SAST & DAST</h2>
                <p>Pipeline umum:</p>
                <ol>
                    <li>Developer melakukan commit kode</li>
                    <li>Unit test berjalan</li>
                    <li>SAST dengan SonarQube</li>
                    <li>Build dan deploy ke staging</li>
                    <li>DAST menggunakan OWASP ZAP</li>
                    <li>Deployment ke production setelah lulus security gate</li>
                </ol>
                <p>Pendekatan ini memastikan aplikasi diuji secara menyeluruh — baik dari sisi kode maupun sisi perilaku aplikasi.</p>
            </article>


            <article>
                <h2>Menjalankan SAST Menggunakan SonarQube</h2>
                <p>Berikut langkah-langkah menjalankan analisis statis menggunakan SonarQube.</p>

                <h3>1. Menjalankan SonarQube via Docker</h3>
                <textarea id="markdown-input" rows="0" cols="0">
docker run -d --name sonarqube -p 9000:9000 sonarqube:lts-community
                </textarea>
                <img src="assets/dso-1.png" alt="Image1" class="article-image">
                <p>Akses melalui browser: <a href="http://localhost:9000">http://localhost:9000</a></p>
                <p>Login default: admin / admin</p>
                <img src="assets/dso-2.png" alt="Image1" class="article-image">
                <img src="assets/dso-3.png" alt="Image1" class="article-image">
                <p>Ambil token : My Account > Security > Generate Token</p>
                <img src="assets/dso-10.png" alt="Image1" class="article-image">


                <h3>2. Install Sonar Scanner (Windows)</h3>
                <h4>1. Download Sonar Scanner</h4>
                <ol>
                    <li>Buka website resmi: <a href="https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/scanners/sonarscanner/">https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/scanners/sonarscanner/</a></li>
                    <li>Cari bagian <strong>SonarScanner for Windows</strong></li>
                    <li>Download file ZIP: <a href="https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-7.3.0.5189-windows-x64.zip">sonar-scanner-cli-7.3.0.5189-windows-x64.zip</a></li>
                    <img src="assets/dso-4.png" alt="Image1" class="article-image">
                </ol>

                <h4>2. Extract ZIP</h4>
                <ol>
                    <li>Setelah di-download, klik kanan → Extract All</li>
                    <li>Pindahkan folder hasil extract ke lokasi permanen, misalnya:</li>
                    <textarea id="markdown-input" rows="0" cols="0">
C:\sonar-scanner\
                    </textarea>
                    <li>Di dalamnya akan ada folder seperti:</li>
                    <textarea id="markdown-input" rows="0" cols="0">
C:\sonar-scanner-7.3.0.5189-windows-x64
                    </textarea>
                    <img src="assets/dso-5.png" alt="Image1" class="article-image">
                </ol>

                <h4>3. Tambahkan ke PATH Windows</h4>
                <p>Agar bisa menjalankan sonar-scanner di Command Prompt / PowerShell.</p>
                <ol>Langkah-langkah:
                    <li>Tekan Start → ketik Edit the system environment variables</li>
                    <li>Klik Environment Variables</li>
                    <li>Pada “System variables”, cari Path → klik Edit</li>
                    <img src="assets/dso-7.png" alt="Image1" class="article-image">
                    <li>Klik New</li>
                    <li>Masukkan path:</li>
                    <textarea id="markdown-input" rows="0" cols="0">
C:\sonar-scanner-7.3.0.5189-windows-x64\bin
                    </textarea>
                    <img src="assets/dso-8.png" alt="Image1" class="article-image">
                    <li>Klik OK sampai selesai</li>
                </ol>

                <h4>4. Cek instalasi</h4>
                <p>Buka Command Prompt atau PowerShell, kemudian jalankan:</p>
                <textarea id="markdown-input" rows="0" cols="0">
sonar-scanner --version
                </textarea>
                <p>Jika berhasil, akan muncul informasi versi.</p>
                <img src="assets/dso-9.png" alt="Image1" class="article-image">

                <h4>5. Konfigurasi file sonar-project.properties</h4>    
                <p>Di dalam folder project kamu, buat file:</p>
                <textarea id="markdown-input" rows="0" cols="0">
C:\xampp\htdocs\antrian\sonar-project.properties
                </textarea>
                <p>Isinya contoh:</p>
                <textarea id="markdown-input2" rows="0" cols="0">
sonar.projectKey=antrian-app
sonar.projectName=Aplikasi Antrian
sonar.projectVersion=1.0

sonar.sources=.
sonar.sourceEncoding=UTF-8
sonar.exclusions=vendor/**,assets/**,*.min.js

sonar.host.url=http://localhost:9000
sonar.login=MASUKKAN_TOKEN_SONAR_MILIKMU
                </textarea>

                <h4>6. Jalankan scan</h4>   
                <p>Dari CMD/PowerShell di folder project:</p>
                <textarea id="markdown-input" rows="0" cols="0">
sonar-scanner
                </textarea>
                <img src="assets/dso-11.png" alt="Image1" class="article-image">
                <p>Sonar Scanner akan mengirimkan analisis ke SonarQube di <a href="https://localhost:9000">http://localhost:9000</a>.</p>
                <img src="assets/dso-12.png" alt="Image1" class="article-image">
            </article>


            <article>
                <h2>Menjalankan DAST Menggunakan OWASP ZAP</h2>
                <p>OWASP ZAP digunakan untuk menguji kerentanan runtime.</p>
                <ol>
                    <li>Buka Command Prompt (CMD) lalu masuk ke direktori proyek:</li>
                    <textarea id="markdown-input" rows="0" cols="0">
cd C:\xampp\htdocs\antrian
                    </textarea>
                    <li>Jalankan OWASP ZAP Baseline Scan menggunakan perintah berikut:</li>
                    <textarea id="markdown-input3" rows="0" cols="0">
docker run --rm -v ${PWD}:/zap/wrk:rw ghcr.io/zaproxy/zaproxy:stable zap-baseline.py -t http://host.docker.internal/antrian -r zap_report.html
                    </textarea>
                    <li>Hasil Scan:</li>
                    <p>Setelah proses selesai, buka laporan hasil pemindaian pada:</p>
                    <p><a href="C:\xampp\htdocs\antrian\zap_report.html">C:\xampp\htdocs\antrian\zap_report.html</a></p>
                    <img src="assets/dso-13.png" alt="Image1" class="article-image">
                </ol>

                <table>
                    <tr>
                        <th>High</th>
                        <th>Medium</th>
                        <th>Low</th>
                        <th>Informational</th>
                    </tr>

                    <tr>
                        <!-- High -->
                        <td></td>

                        <!-- Medium -->
                        <td>
                            • Content Security Policy (CSP) Header Not Set<br>
                            • Missing Anti-clickjacking Header<br>
                            • Source Code Disclosure - SQL<br>
                            • Sub Resource Integrity Attribute Missing
                        </td>

                        <!-- Low -->
                        <td>
                            • Big Redirect Detected (Potential Sensitive Information Leak)<br>
                            • Cookie No HttpOnly Flag<br>
                            • Cookie without SameSite Attribute<br>
                            • Cross-Domain JavaScript Source File Inclusion<br>
                            • In Page Banner Information Leak<br>
                            • Insufficient Site Isolation Against Spectre Vulnerability<br>
                            • Permissions Policy Header Not Set<br>
                            • Server Leaks Information via "X-Powered-By" Header<br>
                            • Server Leaks Version Information via "Server" Header<br>
                            • Timestamp Disclosure - Unix<br>
                            • X-Content-Type-Options Header Missing
                        </td>

                        <!-- Informational -->
                        <td>
                            • Authentication Request Identified<br>
                            • Information Disclosure - Suspicious Comments<br>
                            • Modern Web Application<br>
                            • Non-Storable Content<br>
                            • Session Management Response Identified<br>
                            • Storable and Cacheable Content<br>
                            • User Controllable HTML Element Attribute (Potential XSS)
                        </td>
                    </tr>
                </table>

            </article>


            <article>
                <h2>Integrasi CI/CD</h2>
                <p>
                    Kedua tools dapat diintegrasikan ke dalam GitHub Actions atau Jenkins
                    untuk mengotomatisasi proses SAST dan DAST. Pipeline ini membuat setiap commit diuji
                    keamanannya secara otomatis.
                </p>

                <h3>1. Membuat Repository GitHub (Langkah Awal)</h3>

                <h4>Buat repository baru</h4>
                <ol>
                    <li>Masuk ke GitHub: <a href="https://github.com">https://github.com</a></li>
                    <li>Klik tombol New repository</li>
                    <li>Isi:<ul>
                        <li>Repository name: <strong>devsecops-week5</strong></li>
                        <li>Description: <strong>Repository untuk tugas DevSecOps — SAST & DAST</strong></li>
                        <li>Visibility: <strong>Public</strong></li>
                    </ul></li>
                    <ul>Klik Create repository</ul>
                </ol>
                <p>Repo kamu sekarang siap digunakan.</p>
                
                <h4>Push kode aplikasi ke GitHub</h4>
                <p>Jalankan di Git Bash / CMD:</p>
                <textarea id="markdown-input4" rows="0" cols="0">
cd C:\xampp\htdocs\antrian
git init
git add .
git commit -m "Initial commit - aplikasi antrian"
git branch -M main
git remote add origin https://github.com/kimookoii/antrian-devsecops-week5.git
git push -u origin main
                </textarea>
                <p>Setelah push, seluruh kode aplikasi akan muncul di repository GitHub.</p>
                <img src="assets/dso-14.png" alt="Image1" class="article-image">

                <h3>2. Menambahkan Konfigurasi SAST (SonarQube)</h3>
                <p>SonarQube membutuhkan sebuah file konfigurasi bernama:</p>
                <textarea id="markdown-input" rows="0" cols="0">
sonar-project.properties
                </textarea>
                <p>File ini harus ditaruh di root repository.</p>
                <textarea id="markdown-input5" rows="0" cols="0">
sonar.projectKey=antrian-app
sonar.projectName=Aplikasi Antrian DevSecOps
sonar.projectVersion=1.0

sonar.sources=.
sonar.exclusions=vendor/**,assets/**

sonar.host.url=http://localhost:9000
sonar.login=TOKEN_SONARQUBE_MU
                </textarea>
                <p>Commit dan push:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
git add sonar-project.properties
git commit -m "Add SonarQube configuration"
git push
                </textarea>

                <h3>3. Menambahkan Dockerfile (Wajib Agar Bisa DAST)</h3>
                <p>OWASP ZAP membutuhkan aplikasi berjalan dalam CI/CD. Karena GitHub Actions menjalankan pipeline di server Ubuntu, aplikasi harus dapat dijalankan di dalam container Docker.</p>
                <p>Buat file:</p>
                <textarea id="markdown-input" rows="0" cols="0">
Dockerfile
                </textarea>
                <p>Isi:</p>
                <textarea id="markdown-input7" rows="0" cols="0">
FROM php:8.2-apache

WORKDIR /var/www/html

# Install required packages and enable headers
# enable headers and copy security config
RUN apt-get update \
 && apt-get install -y --no-install-recommends unzip git \
 && a2enmod headers rewrite \
 && rm -rf /var/lib/apt/lists/*

COPY config/security-headers.conf /etc/apache2/conf-available/security-headers.conf
COPY config/security-php.ini /usr/local/etc/php/conf.d/security-php.ini
RUN a2enconf security-headers

# Copy application (honor .dockerignore)
COPY --chown=www-data:www-data . .

# Fix permissions for writable dirs (if any)
RUN if [ -d var ]; then find var -type d -exec chmod 0755 {} \; || true; fi \
 && chown -R www-data:www-data /var/www/html

USER www-data
EXPOSE 80
                </textarea>
                <p>Commit dan push:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
git add Dockerfile
git commit -m "Add Dockerfile for CI"
git push
                </textarea>

                <h3>4. Membuat Folder Pipeline GitHub Actions</h3>
                <p>Buat folder:</p>
                <textarea id="markdown-input" rows="0" cols="0">
.github/workflows/
                </textarea>
                <p>Di dalamnya buat file:</p>
                <textarea id="markdown-input" rows="0" cols="0">
ci-security.yml
                </textarea>

                <h3>5. Workflow CI/CD SAST + DAST</h3>
                <ul>Berikut workflow lengkap untuk:
                    <li>SonarQube SAST</li>
                    <li>Build & Run aplikasi dalam Docker</li>
                    <li>Jalankan ZAP Baseline Scan (DAST)</li>
                    <li>Upload laporan</li>
                    <li>Optional: fail pipeline jika High Risk ditemukan</li>
                </ul>
                <p>File yang telah dibuat:</p>
                <textarea id="markdown-input" rows="0" cols="0">
.github/workflows/ci-security.yml
                </textarea>
                <p>Isi:</p>
                <textarea id="markdown-input8" rows="0" cols="0">
name: CI - SAST & DAST

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  security:
    runs-on: ubuntu-latest
    env:
      APP_PORT: 8080
      APP_URL: http://localhost:8080

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install utils
        run: sudo apt-get update && sudo apt-get install -y jq curl || true

      # -------------------- Setup Java --------------------
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'

      # -------------------- Sanity: Sonar connectivity (debug) --------------------
      - name: Check Sonar connectivity (debug)
        env:
          SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}
        run: |
          if [ -z "${SONAR_HOST_URL}" ]; then
            echo "SONAR_HOST_URL not set (secret missing). Skipping remote Sonar connectivity check."
          else
            echo "Testing Sonar URL: ${SONAR_HOST_URL}"
            curl -v --fail --max-time 10 "${SONAR_HOST_URL}/api/server/version" || echo "Sonar not reachable (will fail later if required)."
          fi

      # -------------------- SAST: SonarQube Scan --------------------
      - name: Run SonarQube Scanner
        uses: sonarsource/sonarqube-scan-action@v2
        with:
          projectBaseDir: .
          args: >
            -Dsonar.projectKey=antrian-app
            -Dsonar.host.url=${{ secrets.SONAR_HOST_URL }}
            -Dsonar.login=${{ secrets.SONAR_TOKEN }}

      - name: Show Sonar scanner metadata (debug)
        if: always()
        run: |
          echo "PWD: $(pwd)"
          echo "Listing .scannerwork if exists:"
          ls -la .scannerwork || true
          if [ -f ".scannerwork/report-task.txt" ]; then
            echo "---- report-task.txt ----"
            sed -n '1,200p' .scannerwork/report-task.txt
          else
            echo ".scannerwork/report-task.txt not found"
          fi

      # -------------------- Sonar Quality Gate (non-blocking for tests) --------------------
      - name: Wait for SonarQube Quality Gate (non-blocking)
        continue-on-error: true
        uses: sonarsource/sonarqube-quality-gate-action@v1
        with:
          scanMetadataReportFile: .scannerwork/report-task.txt
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
          SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}

      - name: Print Quality Gate JSON (debug)
        if: always()
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
          SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}
        run: |
          if [ -f ".scannerwork/report-task.txt" ]; then
            ANALYSIS_ID=$(sed -n 's/^analysisId=//p' .scannerwork/report-task.txt)
            if [ -n "$ANALYSIS_ID" ]; then
              echo "Analysis ID: $ANALYSIS_ID"
              echo "Quality Gate API result (may be stale/fail if server unreachable):"
              curl -s -u "${SONAR_TOKEN}:" "${SONAR_HOST_URL}/api/qualitygates/project_status?analysisId=${ANALYSIS_ID}" | jq . || true
            else
              echo "analysisId not found in report-task.txt"
            fi
          else
            echo "No report-task.txt to query Quality Gate."
          fi

      # -------------------- Build & Run App Container --------------------
      - name: Build Docker image for app
        run: docker build -t antrian-app .

      - name: Run app container
        run: docker run -d --name antrian -p 8080:80 antrian-app

      - name: Wait for app to be healthy
        run: |
          echo "Waiting for ${APP_URL} to respond..."
          for i in {1..30}; do
            if curl -sSf "${{ env.APP_URL }}" >/dev/null 2>&1; then
              echo "App is up"
              exit 0
            fi
            echo "Waiting... ($i)"
            sleep 2
          done
          echo "App did not start in time" && exit 1

      - name: App quick check (from runner)
        run: |
          echo "curl headers:"
          curl -I --max-time 10 "${{ env.APP_URL }}" || true

      # -------------------- Prepare workspace for ZAP --------------------
      - name: Make workspace writable for ZAP (if permissions block)
        run: |
          echo "Adjusting permissions for workspace so ZAP can write reports"
          sudo chmod -R a+rw "${{ github.workspace }}" || true

      # -------------------- DAST: Run OWASP ZAP (host network) --------------------
      - name: Pull ZAP image
        run: docker pull ghcr.io/zaproxy/zaproxy:stable

      - name: Run ZAP Baseline (ignore non-zero exit)
        run: |
          set +e
          docker run --rm -u root --network host -v "${{ github.workspace }}":/zap/wrk:rw \
            ghcr.io/zaproxy/zaproxy:stable \
            zap-baseline.py -t "${{ env.APP_URL }}" -r zap_report.html || true
          set -e

      # -------------------- Always upload ZAP report so testers can inspect --------------------
      - name: Upload ZAP report
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: zap-report
          path: zap_report.html

      - name: Print ZAP High Alerts (debug)
        if: always()
        run: |
          if [ -f "zap_report.html" ]; then
            echo "=== ZAP High Alerts (first hits) ==="
            grep -n -C3 "High" zap_report.html || true
          else
            echo "No zap_report.html"
          fi

      # Non-fatal: do not fail the job based on ZAP High (suitable for testers)
      - name: Fail if ZAP found High (non-fatal)
        continue-on-error: true
        run: |
          if [ -f "zap_report.html" ] && grep -q "High" zap_report.html; then
            echo "High risk found (non-fatal in this workflow). See zap-report artifact for details."
            exit 1
          else
            echo "No High risk found; continuing."
          fi

      - name: Show ZAP report snippet (debug)
        if: always()
        run: |
          if [ -f "zap_report.html" ]; then
            echo "ZAP report exists, showing first 200 lines:"
            sed -n '1,200p' zap_report.html || true
          else
            echo "zap_report.html not found"
          fi

      # -------------------- Cleanup (always run) --------------------
      - name: Stop and remove containers
        if: always()
        run: |
          echo "Cleaning up containers..."
          docker rm -f antrian || true
                </textarea>

                <h3>6. Menambahkan Secrets di GitHub</h3>
                <p>Masuk ke:</p>
                <p><strong>GitHub → Repository → Settings → Secrets → Actions</strong></p>
                <p>Tambahkan:</p>

                <table>
                    <tr>
                        <th>Secret Name</th>
                        <th>Value</th>
                    </tr>

                    <tr>
                        <td>
                            SONAR_HOST_URL<br>
                            SONAR_TOKEN
                        </td>

                        <td>
                            http://IP_SONARQUBE:9000<br>
                            Token dari SonarQube
                        </td>
                    </tr>
                </table>
                <img src="assets/dso-15.png" alt="Image1" class="article-image">

                <h3>7. Menjalankan Pipeline</h3>
                <p>Setelah semua file dipush, pipeline akan otomatis berjalan setiap:<br>
                ✔ Push ke branch main<br>
                ✔ Pull request ke main</p>
                <p>Masuk ke:<br>
                <strong>GitHub → Actions → CI - SAST & DAST</strong></p>
                <img src="assets/dso-16.png" alt="Image1" class="article-image">
                <p>Di bagian output akan terlihat:</p>
                <ul>
                    <li><strong>Hasil SAST dari SonarQube</strong></li>
                    <img src="assets/dso-18.png" alt="Image1" class="article-image">
                    <li><strong>Hasil DAST dari ZAP</strong></li>
                    <img src="assets/dso-19.png" alt="Image1" class="article-image">
                    <li><strong>Laporan zap_report.html:</strong> <a href="https://github.com/kimookoii/devsecops-week5/actions/runs/19732586524/artifacts/4696036645">https://github.com/kimookoii/devsecops-week5/actions/runs/19732586524/artifacts/4696036645</a></li>
                    <img src="assets/dso-17.png" alt="Image1" class="article-image">
                </ul>
            </article>


            <article>
                <h2>Temuan dan Mitigasi : SonarQube</h2>
                <img src="assets/dso-20.png" alt="Image1" class="article-image">

                <h3>1. Add password protection to this database</h3>
                <img src="assets/dso-21.png" alt="Image1" class="article-image">
                <p>Ini bukan bug 100% (Sonar tidak bilang “vulnerability”), tetapi peringatan bahwa koneksi database kamu menggunakan username = root dan password kosong, yang tidak aman untuk environment apa pun (bahkan untuk development).</p>
                <p><strong>Kenapa Sonar memberi peringatan ini?</strong></p>
                <p>Karena baris:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
$username = "root";
$password = "";
                </textarea>
                <ul>Dan ini:
                    <li><strong>Tidak ada password:</strong> akses database terbuka.</li>
                    <li><strong>Menggunakan root:</strong> role paling tinggi (akses penuh ke mysql).</li>
                    <li><strong>Ditulis langsung di file:</strong> credential hardcoded → praktik tidak aman.</li>
                </ul>
                <p>Sonar menganggap ini high-risk hotspot, karena jika code ini digunakan dalam deployment, database kamu bisa diambil alih.</p>
                <p><strong>Perbaikan yang benar</strong></p>
                <p>Buat user baru MySQL:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
CREATE USER 'antrian_user'@'%' IDENTIFIED BY 'PasswordKuat123!';
GRANT ALL PRIVILEGES ON db_antrian.* TO 'antrian_user'@'%';
FLUSH PRIVILEGES;
                </textarea>
                <p>Lalu update file auth/db.php:</p>
                <textarea id="markdown-input9" rows="0" cols="0">
<?php
$servername = "localhost";
$username   = "antrian_user"; 
$password   = "PasswordKuat123!";

try {
    $conn = new PDO(
        "mysql:host=$servername;dbname=db_antrian;charset=utf8mb4",
        $username,
        $password,
        [
            PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
            PDO::ATTR_EMULATE_PREPARES   => false,
        ]
    );
} catch (PDOException $e) {
    die("Database connection failed.");
}
                </textarea>

                <h3>2. Remove the parentheses from this echo call</h3>
                <img src="assets/dso-22.png" alt="Image1" class="article-image">
                <p><strong>Kenapa Sonar memberi peringatan ini?</strong></p>
                <textarea id="markdown-input" rows="0" cols="0">
<title><?php echo (basename($_SERVER['PHP_SELF']) == 'login.php' ? 'Login - Antrian' : 'Error') ?></title>
                </textarea>
                <p>SonarQube menganggap bahwa tanda kurung ( ... ) setelah echo tidak diperlukan dan membuat kode “kurang clean”.<br>
                    Ini bukan bug dan bukan celah keamanan — hanya Code Smell / gaya penulisan.</p>
                <p><strong>Perbaikan yang benar</strong></p>
                <p>Cukup hapus tanda kurung luar, karena echo tidak membutuhkan ekspresi di dalam ().</p>
                <textarea id="markdown-input" rows="0" cols="0">
<title><?php echo basename($_SERVER['PHP_SELF']) == 'login.php' ? 'Login - Antrian' : 'Error' ?></title>
                </textarea>
                <p>Output-nya tetap sama.</p>
                <img src="assets/dso-23.png" alt="Image1" class="article-image">
                <img src="assets/dso-24.png" alt="Image1" class="article-image">
                <p>Untuk masalah <strong>"Remove the parentheses from this echo call."</strong> yang lain. Perbaikan tetap sama, cukup hapus tanda kurung luar. Karena echo tidak membutuhkan ekspresi di dalam ().</p>

                <h3>3. include_once</h3>
                <p>Ini BUKAN bug atau vuln. Ini hanya "Code Smell" bersifat rekomendasi, dan dalam project PHP procedural seperti punyamu, warning ini boleh diabaikan.</p>
                <p><strong>Kenapa Sonar memberi peringatan ini?</strong></p>
                <p>Sonar menunjukkan:<br>
                    <strong>Replace "include_once" with namespace import mechanism through the "use" keyword.</strong><br>
                    Ini rule milik Sonar untuk PHP <strong>berbasis OOP + namespace modern</strong> (PSR-4). Rule ini menganggap kamu memanggil file PHP seolah-olah kamu memanggil class/function di namespace, padahal bentuk kode kamu adalah:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
include_once '../auth/db.php';
include_once '../csrf-security/csrf.php';
                </textarea>
                <p>Dalam project lama / procedural PHP, ini normal.<br>
                    Sonar tidak secara otomatis tahu struktur aplikasi kamu — jadi dia memberikan false positive recommendation.</p>
                <p><strong>Perbaikan yang benar (jika ingin menghilangkan warning)</strong></p>
                <p>Tambahkan komentar Sonar untuk menandai rule ini sebagai “won’t fix”.<br>
                    Tambahkan di atas baris include:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
// NOSONAR - include_once needed because this project is procedural, not namespaced.
include_once '../auth/db.php';
include_once '../csrf-security/csrf.php';
                </textarea>
                <p>SonarQube otomatis mengabaikan baris tersebut.<br>
                    Ini adalah BEST PRACTICE saat rule tidak applicable.</p>
            </article>


            <article>
                <h2>Temuan dan Mitigasi : OWASP ZAP</h2>

                <h3>1. Content Security Policy (CSP) Header Not Set</h3>
                <img src="assets/dso-26.png" alt="Image1" class="article-image">
                <p><strong>Kenapa terjadi?</strong></p>
                <p>ZAP menandai temuan “Content Security Policy (CSP) Header Not Set” karena halaman web tidak mengirimkan header Content-Security-Policy.</p>
                <ul>Tanpa CSP, browser tidak tahu sumber konten mana yang boleh dijalankan, sehingga aplikasi menjadi lebih rentan terhadap:
                    <li>Cross-Site Scripting (XSS)</li>
                    <li>Data injection / malicious scripts</li>
                    <li>Loading script atau resource dari domain berbahaya</li>
                </ul>
                <p>CSP adalah lapisan keamanan tambahan yang membatasi JavaScript, CSS, gambar, font, iframe, dan resource lain agar hanya berasal dari sumber yang dipercaya.</p>
                <p><strong>Cara Mengatasinya</strong></p>
                <p>Tambahkan header CSP pada web server atau aplikasi. Format paling sederhana:</p>
                <p>Apache / .htaccess</p>
                <textarea id="markdown-input" rows="0" cols="0">
Header always set Content-Security-Policy "default-src 'self';"
                </textarea>
                <p>PHP (per halaman)</p>
                <textarea id="markdown-input" rows="0" cols="0">
header("Content-Security-Policy: default-src 'self';");
                </textarea>

                <h3>2. Insufficient Site Isolation Against Spectre</h3>
                <img src="assets/dso-27.png" alt="Image1" class="article-image">
                <img src="assets/dso-28.png" alt="Image1" class="article-image">
                <p><strong>Kenapa terjadi?</strong></p>
                <ul>ZAP memberikan temuan "Insufficient Site Isolation Against Spectre" karena halaman web tidak mengirimkan header keamanan modern seperti:
                    <li>Cross-Origin-Resource-Policy (CORP)</li>
                    <li>Cross-Origin-Embedder-Policy (COEP)</li>
                </ul>
                <p>Header-header ini dirancang untuk melindungi browser dari side-channel attacks, terutama Spectre, yang memungkinkan website jahat membaca informasi sensitif dari website lain melalui mekanisme spekulatif CPU.</p>
                <p>Tanpa header ini, browser tidak dapat sepenuhnya mengisolasi sumber daya (resource isolation), sehingga risiko kebocoran data antar-origin menjadi lebih tinggi.</p>
                <p><strong>Cara Mengatasinya</strong></p>
                <p>Tambahkan header berikut pada web server atau aplikasi:</p>
                <p><strong>Header Wajib (nilai paling aman)</strong></p>
                <p>Cross-Origin-Resource-Policy (CORP)</p>
                <textarea id="markdown-input" rows="0" cols="0">
Header always set Cross-Origin-Resource-Policy "same-origin"
                </textarea>
                <p>Cross-Origin-Embedder-Policy (COEP)</p>
                <textarea id="markdown-input" rows="0" cols="0">
Header always set Cross-Origin-Embedder-Policy "require-corp"
                </textarea>
                <p><strong>Contoh implementasi lengkap (Apache / .htaccess)</strong></p>
                <textarea id="markdown-input6" rows="0" cols="0">
<IfModule mod_headers.c>
    Header always set Cross-Origin-Resource-Policy "same-origin"
    Header always set Cross-Origin-Embedder-Policy "require-corp"
</IfModule>
                </textarea>
                <p><strong>Menggunakan PHP (per halaman)</strong></p>
                <textarea id="markdown-input6" rows="0" cols="0">
header("Cross-Origin-Resource-Policy: same-origin");
header("Cross-Origin-Embedder-Policy: require-corp");
                </textarea>

                <h3>3. Server Leaks Version Information via "Server" HTTP Response Header</h3>
                <img src="assets/dso-29.png" alt="Image1" class="article-image">
                <p><strong>Kenapa terjadi?</strong></p>
                <p>ZAP menemukan bahwa server web mengirimkan header:</p>
                <textarea id="markdown-input" rows="0" cols="0">
Server: Apache/2.4.65 (Debian)
                </textarea>
                <ul>Informasi ini dianggap sensitif karena:
                    <li>Mengungkap jenis server (Apache / Nginx / IIS)</li>
                    <li>Mengungkap versi dan OS (Debian)</li>
                    <li>Membantu penyerang menargetkan eksploit yang cocok dengan versi tersebut</li>
                </ul>
                <p>Singkatnya: fingerprinting → memudahkan attacker mengetahui kelemahan dan exploit apa yang kemungkinan bekerja.<br>
                    Tidak mematikan, tapi low-risk hardening issue yang wajib diperbaiki untuk mengurangi attack surface.</p>
                <p><strong>Cara Mengatasinya</strong></p>
                <p><strong>Apache (httpd / Debian / Docker php:apache)</strong></p>
                <p>Tambahkan ini ke config Apache:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
ServerSignature Off
ServerTokens Prod
                </textarea>
                <p>Atau di .htaccess (jika diizinkan):</p>
                <textarea id="markdown-input6" rows="0" cols="0">
ServerSignature Off
Header unset Server
                </textarea>
                <p><strong>Jika pakai container Docker berdasarkan apache</strong></p>
                <p>Tambahkan ke Dockerfile:</p>
                <textarea id="markdown-input6" rows="0" cols="0">
RUN echo "ServerSignature Off" >> /etc/apache2/conf-available/security.conf \
 && echo "ServerTokens Prod" >> /etc/apache2/conf-available/security.conf \
 && a2enconf security
                </textarea>
                <p><strong>PHP (hilangkan X-Powered-By)</strong></p>
                <p>Di php.ini atau file config:</p>
                <textarea id="markdown-input" rows="0" cols="0">
expose_php = Off
                </textarea>
            </article>


            <article>
                <h2>Kesimpulan</h2>
                <p>
                    SAST dan DAST adalah dua pendekatan penting untuk menjaga keamanan aplikasi dalam DevSecOps.
                    SAST membantu mendeteksi kerentanan pada tahap awal, sedangkan DAST memastikan aplikasi aman
                    saat dijalankan. Integrasi keduanya ke pipeline otomatis membuat proses pengembangan lebih aman,
                    cepat, dan efisien.
                </p>
            </article>


        </section>
    </main>

    <footer>
        <p>&copy; 2025 | made with love -zico</p>
    </footer>
</body>
</html>