<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praktik Minggu 4 Pentest Mobile</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <button class="back-button" onclick="window.history.back();">&#8592; Back</button>
            <h1>88032023006 | ZICO</h1>
        </div>
    </header>

    <title1>
        <div class="title1-container">
            <h1>Praktik Minggu 4 Pentest Mobile</h1>
            <h2>Environment Pentest Mobile</h2>
        </div>
    </title1>

    <main>
        <section class="content">

            <!-- ======================================================== -->

            <article>
                <h2>1. Pendahuluan</h2>
                <p>Artikel ini mendokumentasikan praktik terpadu <b>Environment Pentest Mobile</b> yang bertujuan menyiapkan lingkungan pengujian aplikasi Android untuk kebutuhan analisis keamanan jaringan dan komunikasi aplikasi. Praktik dilakukan dengan fokus pada emulator Android rooted, konfigurasi proxy interception menggunakan Burp Suite, serta penggunaan ADB dan tools pendukung seperti Frida dan tcpdump.</p>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>2. Environment Pengujian</h2>
                <ul>
                    <li>Host OS: Windows 11 (tanpa WSL, tanpa virtual machine Linux)</li>
                    <li>Emulator: Android Emulator (Google AVD)</li>
                    <li>Android Version: Android 11 (x86_64, development image)</li>
                    <li>ADB Version: 1.0.41</li>
                    <li>Burp Suite: Burp Suite Community Edition</li>
                    <li>Tools Tambahan: MobSF, Frida Server, tcpdump</li>
                </ul>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>3. Persiapan Awal</h2>

                <h3>3.1 Verifikasi koneksi emulator</h3>
                <textarea id="markdown-input" rows="0" cols="0">
adb devices
                </textarea>
                <p>
                Perintah di atas menunjukkan emulator terdeteksi.
                <img src="assets/pm-1.png" alt="Image" class="article-image">
                </p>

                <h3>3.2 Verifikasi akses root</h3>
                <textarea id="markdown-input" rows="0" cols="0">
adb root
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
adb shell id
                </textarea>
                <p>Output menampilkan uid=0(root) yang menandakan emulator berjalan dalam kondisi rooted.</p>
                <img src="assets/pm-2.png" alt="Image" class="article-image">

                <h3>3.2 Menjalankan dan Akses MobSF</h3>
                <p>Jalankan container MobSF dengan melakukan mapping port 8000 container ke port 8000 host:</p>
                <textarea id="markdown-input" rows="0" cols="0">
docker run -it --rm -p 8000:8000 opensecurity/mobile-security-framework-mobsf:latest
                </textarea>
                <p>Setelah container berjalan, buka browser dan akses alamat berikut: <a href="http://localhost:8000/">http://localhost:8000/</a><br>Jika berhasil, halaman dashboard MobSF akan tampil dan siap digunakan untuk analisis APK.</p>
                <p>Gunakan kredensial default MobSF untuk masuk ke dashboard:<br><b>Username:</b> mobsf<br><b>Password:</b> mobsf</p>
                <p>Setelah login, Dapatkan package name target.</p>

                <h3>3.3 Instalasi Frida Server dan tcpdump</h3>
                <p>Disesuaikan dengan ABI emulator lalu di-push ke device:</p>
                <p><b>Instalasi Frida Server</b></p>
                <textarea id="markdown-input" rows="0" cols="0">
adb push frida-server /data/local/tmp/
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
adb shell chmod 755 /data/local/tmp/frida-server
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
adb shell /data/local/tmp/frida-server
                </textarea>
                <img src="assets/pm-4.png" alt="Image" class="article-image">
                <p>Verifikasi dilakukan dengan memastikan proses Frida berjalan:</p>
                <textarea id="markdown-input" rows="0" cols="0">
adb shell ps | findstr frida
                </textarea>
                <img src="assets/pm-5.png" alt="Image" class="article-image">

                <p><b>Instalasi tcpdump</b></p>
                <textarea id="markdown-input" rows="0" cols="0">
adb push tcpdump /data/local/tmp/
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
adb shell chmod 755 /data/local/tmp/tcpdump
                </textarea>
                <textarea id="markdown-input" rows="0" cols="0">
adb shell /data/local/tmp/tcpdump -i any -s 0 -w /sdcard/capture.pcap
                </textarea>
                <img src="assets/pm-13.png" alt="Image" class="article-image">
                <p>Pada Android/Linux, pesan error “No such file or directory” saat menjalankan tcpdump tidak berarti file tersebut hilang, melainkan binary tidak dapat dijalankan oleh sistem. Hal ini biasanya terjadi karena tcpdump yang digunakan merupakan dynamic binary yang membutuhkan dynamic linker (misalnya /lib/ld-linux.so), sementara Android emulator tidak menyediakan linker tersebut. Akibatnya, meskipun file sudah ada dan permission sudah benar, sistem tetap menolak mengeksekusinya. Kondisi ini sangat umum terjadi pada environment pentest mobile berbasis emulator dan merupakan keterbatasan lingkungan, bukan kesalahan konfigurasi pengguna.</p>

                <h3>3.4 Instalasi Burp CA Certificate</h3>
                <p>Buka Burp Suite → Proxy → Proxy Settings → aktifkan listener 127.0.0.1:8080.</p>
                <img src="assets/pm-6.png" alt="Image" class="article-image">
                <p>Export Sertifikat Burp: Proxy → Import/Export CA → Export Certificate in DER Format (.cer)</p>
                <img src="assets/pm-7.png" alt="Image" class="article-image">
                <p>CA Certificate dari Burp Suite diekspor dalam format .cer lalu dikirim ke emulator:</p>
                <textarea id="markdown-input" rows="0" cols="0">
adb push cacert.cer /sdcard/Download/
                </textarea>
                <img src="assets/pm-8.png" alt="Image" class="article-image">
                <p>Instalasi dilakukan pada emulator melalui menu:   Buka Settings → Security & privacy → More security & privacy → Encryption & credential → Install certificate → pilih CA certificate → install anyway → cari dan pilih file cacert.cer. Sertifikat berhasil terpasang sebagai User CA (screenshot dilampirkan).</p>
                <img src="assets/pm-9.png" alt="Image" class="article-image">

                <h3>3.5 Konfigurasi ADB Reverse</h3>
                <p>Untuk aplikasi yang mengakses localhost, dilakukan port reverse:</p>
                <textarea id="markdown-input" rows="0" cols="0">
adb reverse tcp:8080 tcp:8080
                </textarea>
                <img src="assets/pm-10.png" alt="Image" class="article-image">
                <p>Konfigurasi ini memungkinkan aplikasi Android mengirim traffic ke Burp Suite yang berjalan di host Windows.</p>
                <p>Konfigurasi Wifi emulator: AndroidWifi</p>
                <img src="assets/pm-11.png" alt="Image" class="article-image">

                <h3>3.6 Intercept Traffic dengan Burp Suite</h3>
                <p>Burp Proxy dijalankan dengan mode <b>Intercept On</b>. Aplikasi kemudian dijalankan dan dilakukan interaksi untuk memicu request HTTP/HTTPS. </p>
                <img src="assets/pm-12.png" alt="Image" class="article-image">

                <h3>3.7 Capture Traffic Menggunakan tcpdump</h3>
                <p>Pada tahap perekaman traffic jaringan menggunakan tcpdump, file binary berhasil dipush ke emulator dan diberikan hak eksekusi. Namun saat dijalankan, sistem Android menampilkan error <i>No such file or directory</i>.</p>

                <p>Error ini dianalisis bukan disebabkan oleh ketiadaan file atau masalah permission, melainkan karena binary tcpdump yang digunakan bersifat dynamic dan membutuhkan dynamic linker yang tidak tersedia pada environment Android emulator.</p>

                <p>Hal ini merupakan kendala umum dalam mobile pentest ketika menjalankan native tools di emulator. Solusi teknis yang direkomendasikan adalah menggunakan tcpdump versi static build yang sesuai dengan ABI emulator atau menjalankan capture melalui metode alternatif seperti proxy interception menggunakan Burp Suite.</p>

                <p>Dalam praktik ini, bukti utama analisis jaringan diperoleh melalui intercept traffic HTTPS menggunakan Burp Proxy, yang telah mencukupi tujuan pengujian.</p>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>4. Hasil Pengujian</h2>

                <h3>4.1 Instalasi CA Certificate</h3>
                <p>CA Burp berhasil diinstal sebagai User CA pada emulator Android. Beberapa aplikasi dapat langsung mempercayai sertifikat ini, terutama aplikasi tanpa konfigurasi certificate pinning.</p>
                <img src="assets/pm-9.png" alt="Image" class="article-image">

                <h3>4.2 Intercept Request HTTP/HTTPS</h3>
                <p>Request HTTP dan HTTPS berhasil ditangkap di Burp Suite. Hal ini membuktikan bahwa aplikasi masih mempercayai User CA dan tidak menerapkan certificate pinning yang ketat.</p>
                <img src="assets/pm-14.png" alt="Image" class="article-image">
                <p>Berdasarkan hasil pengujian menggunakan Burp Suite, terlihat beberapa request HTTP berhasil ditangkap, seperti permintaan ke endpoint connectivitycheck.gstatic.com/generate_204 dan www.google.com/gen_204. Request ini merupakan trafik standar Android untuk melakukan pengecekan konektivitas jaringan. Fakta bahwa request HTTP tersebut muncul di tab Proxy → HTTP history menunjukkan bahwa konfigurasi proxy Burp sudah benar dan emulator berhasil diarahkan ke Burp.</p>
                <p>Namun, request HTTPS dari aplikasi target tidak terlihat atau tidak dapat di-intercept sepenuhnya. Hal ini mengindikasikan bahwa meskipun Burp CA telah terpasang sebagai User CA, aplikasi target kemungkinan tidak mempercayai User CA atau menerapkan mekanisme keamanan tambahan.</p>

                <h3>4.3 Bukti Tambahan: Output Frida</h3>
                <img src="assets/pm-15.png" alt="Image" class="article-image">
                <p>Sebagai bukti tambahan, dilakukan pengujian menggunakan Frida untuk melakukan dynamic instrumentation pada aplikasi yang berjalan di emulator Android. Hasil output Frida menunjukkan bahwa:</p>
                <ul>
                    <li>Frida berhasil terhubung ke emulator (Connected to Android Emulator)</li>
                    <li>Script hook berhasil dijalankan, ditandai dengan log <i>Hook Log.d berhasil</i> dan <i>Hook String.toString berhasil</i></li>
                    <li>Terdapat pesan error <i>MainActivity tidak ditemukan</i>, yang menunjukkan bahwa script mencoba melakukan hook pada class atau package yang tidak sesuai dengan aplikasi yang sedang berjalan</li>
                    <li>Terdeteksi event <i>android.intent.action.PROXY_CHANGE</i>, yang menandakan adanya perubahan konfigurasi proxy pada sistem Android selama pengujian</li>
                </ul>
                <p>Meskipun terdapat error pada pencarian MainActivity, keberhasilan proses hooking dan terdeteksinya event perubahan proxy membuktikan bahwa Frida berjalan dengan baik di environment pengujian. Hal ini juga memperkuat indikasi bahwa aplikasi merespons perubahan proxy yang digunakan untuk intercept traffic melalui Burp Suite. Frida dapat digunakan sebagai metode lanjutan dalam lingkungan lab untuk menganalisis perilaku aplikasi maupun melakukan bypass certificate pinning pada build pengujian.</p>

                <h3>4.4 Bukti Tambahan: tcpdump</h3>
                <p>Percobaan capture traffic menggunakan tcpdump tidak berhasil dijalankan karena kendala kompatibilitas binary pada emulator Android. Error ini telah dianalisis sebelumnya dan disebabkan oleh keterbatasan environment (dynamic binary / linker). Meskipun demikian, bukti intercept Burp dan output Frida sudah cukup valid untuk memenuhi tujuan pengujian.</p>
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>5. Mitigasi Keamanan</h2>
                <p>Berdasarkan hasil pengujian, berikut rekomendasi mitigasi yang disarankan:</p>

                <p><b>1. Implementasi Certificate Pinning</b></p>
                <p>Pastikan certificate pinning diterapkan dengan benar pada aplikasi produksi untuk mencegah MITM.</p>
                <p><b>2. Gunakan Network Security Config</b></p>
                <p>Batasi kepercayaan hanya pada system CA dan backend certificate resmi.<br>Nonaktifkan kepercayaan terhadap User CA pada build produksi.</p>
                <p><b>3. Hardening Build Produksi</b></p>
                <p>Nonaktifkan mode debug.<br>Hapus log sensitif.<br>Aktifkan obfuscation (ProGuard/R8).</p>
                <p><b>4. Deteksi Root & Instrumentation</b></p>
                <p>Tambahkan deteksi root, emulator, dan Frida untuk meningkatkan keamanan aplikasi.</p>
                <p><b>5.Pisahkan Build Testing dan Production</b></p>
                <p>Gunakan build khusus testing untuk kebutuhan pentest agar bypass tidak dapat dilakukan pada aplikasi produksi.</p>    
            </article>

            <!-- ======================================================== -->

            <article>
                <h2>6. Kesimpulan</h2>
                <p>Secara keseluruhan, praktik Environment Pentest Mobile ini berhasil menunjukkan bagaimana menyiapkan dan menggunakan emulator Android rooted untuk menganalisis keamanan komunikasi aplikasi. Konfigurasi ADB, instalasi Burp CA, serta pengaturan proxy berhasil dilakukan sehingga trafik HTTP dapat diintercept sebagai bukti bahwa environment pengujian berjalan dengan benar. Meskipun intercept HTTPS dan perekaman trafik menggunakan tcpdump mengalami kendala akibat mekanisme keamanan aplikasi dan keterbatasan emulator, hal tersebut justru memperlihatkan adanya proteksi seperti pembatasan User CA dan potensi certificate pinning. Penggunaan Frida sebagai bukti tambahan menunjukkan bahwa dynamic instrumentation dapat berjalan di lingkungan lab. Dari praktik ini dapat disimpulkan bahwa pemahaman environment, kompatibilitas tools, dan mekanisme keamanan aplikasi sangat penting dalam mobile pentesting, serta hasil pengujian menegaskan perlunya penerapan kontrol keamanan jaringan yang kuat pada aplikasi Android.</p>
            </article>

            <!-- ======================================================== -->

        </section>
    </main>

<footer>
    <p>&copy; 2025 | made with love - zico</p>
</footer>

</body>
</html>
